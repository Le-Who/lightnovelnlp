# Light Novel NLP ‚Äî –ø–µ—Ä–µ–≤–æ–¥ —Ä–∞–Ω–æ–±—ç —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º –≥–ª–æ—Å—Å–∞—Ä–∏–µ–º

–°–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏ –ø–µ—Ä–µ–≤–æ–¥–∞ –≥–ª–∞–≤ —Ä–∞–Ω–æ–±—ç —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º Gemini API, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –≥–ª–æ—Å—Å–∞—Ä–∏—è –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –ø–æ–¥ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã Render.com, Neon.tech –∏ Upstash.com.

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ—Ä–º–∏–Ω–æ–≤ (–ø–æ –∂–∞–Ω—Ä—É –ø—Ä–æ–µ–∫—Ç–∞) –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ ¬´–æ—á–µ–≤–∏–¥–Ω—ã—Ö¬ª —Ç–µ—Ä–º–∏–Ω–æ–≤
- –ê–Ω–∞–ª–∏–∑ —Å–≤—è–∑–µ–π –º–µ–∂–¥—É —Ç–µ—Ä–º–∏–Ω–∞–º–∏
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∞–º–º–∞—Ä–∏ –≥–ª–∞–≤—ã –∏ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–∞–º–º–∞—Ä–∏ –ø–æ –ø—Ä–æ–µ–∫—Ç—É
- –ü–µ—Ä–µ–≤–æ–¥ –≥–ª–∞–≤—ã —Å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º —É—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω–æ–≥–æ –≥–ª–æ—Å—Å–∞—Ä–∏—è
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –≥–ª–∞–≤; —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Ä–º–∏–Ω–∞–º–∏: –ø—Ä–æ—Å–º–æ—Ç—Ä pending, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º, approve/reject, –≤–µ—Ä—Å–∏–∏ –≥–ª–æ—Å—Å–∞—Ä–∏—è
- –ü–∞–∫–µ—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏ –ø–∞–∫–µ—Ç–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –≥–ª–∞–≤ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–ø–µ—Ä–µ–≤–æ–¥—ã, –≥–ª–æ—Å—Å–∞—Ä–∏–π, —Å–∞–º–º–∞—Ä–∏) –Ω–∞ Upstash REST —Å fallback –Ω–∞ TCP Redis
- –£—á—ë—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–ª—é—á–µ–π Gemini (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ, —Å –∞–≤—Ç–æ‚Äë—Å–±—Ä–æ—Å–æ–º –ø–æ America/Los_Angeles) –∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ç—Ä–æ—Ç—Ç–ª–∏–Ω–≥ 10 req/min

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Backend (FastAPI)
- FastAPI, SQLAlchemy ORM, Pydantic Settings
- –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã: `projects`, `processing`, `translation`, `glossary`, `batch`
- –ë–î: PostgreSQL (Neon.tech)
- –ö—ç—à: Upstash Redis REST (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ) + TCP fallback
- NLP: Gemini (`gemini-2.5-flash`) —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π –∫–ª–∏–µ–Ω—Ç —Å —Ä–æ—Ç–∞—Ü–∏–µ–π –∫–ª—é—á–µ–π, –¥–Ω–µ–≤–Ω—ã–º —É—á—ë—Ç–æ–º –∏ –º–∏–Ω—É—Ç–Ω—ã–º —Ç—Ä–æ—Ç—Ç–ª–∏–Ω–≥–æ–º
- –ú–∏–≥—Ä–∞—Ü–∏–∏: Alembic (–∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Command)

### Frontend
- React + Vite (SPA)
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ `frontend/public/api-tools.html` ‚Äî –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å API –±–µ–∑ —Å–±–æ—Ä–∫–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
  - –ü–æ—Ä—è–¥–æ–∫ –±–ª–æ–∫–æ–≤: 1) –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, 2) –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏, 3) –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–ª–∞–≤–∞–º–∏,
    4) –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –ø–µ—Ä–µ–≤–æ–¥, 5) –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –≥–ª–∞–≤, 6) –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Ä–º–∏–Ω–∞–º–∏,
    7) –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ—Ä–º–∏–Ω–æ–≤, 8) –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–ª–æ—Å—Å–∞—Ä–∏–µ–º, 9) –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

## üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–∞–π–ø–ª–∞–π–Ω

1) –ê–Ω–∞–ª–∏–∑ –≥–ª–∞–≤—ã
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ—Ä–º–∏–Ω–æ–≤ (1 –≤—ã–∑–æ–≤ LLM)
- –ê–Ω–∞–ª–∏–∑ —Å–≤—è–∑–µ–π (1 –≤—ã–∑–æ–≤ LLM, –µ—Å–ª–∏ —Ç–µ—Ä–º–∏–Ω–æ–≤ ‚â• 2)
- –°–æ–∑–¥–∞–Ω–∏–µ —Å–∞–º–º–∞—Ä–∏ (1 –≤—ã–∑–æ–≤ LLM)
- –¢–µ—Ä–º–∏–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è (pending/approved), —Å–≤—è–∑–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è, —Å–∞–º–º–∞—Ä–∏ –∫—ç—à–∏—Ä—É–µ—Ç—Å—è

2) –ü–µ—Ä–µ–≤–æ–¥
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —É—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã –ø—Ä–æ–µ–∫—Ç–∞
- –§–æ—Ä–º–∏—Ä—É—é—Ç—Å—è: –≥–ª–æ—Å—Å–∞—Ä–∏–π –¥–ª—è –ø—Ä–æ–º–ø—Ç–∞, —Å–∞–º–º–∞—Ä–∏ –≥–ª–∞–≤—ã –∏ (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏) –ø—Ä–æ–µ–∫—Ç–Ω–æ–µ —Å–∞–º–º–∞—Ä–∏
- –ü–µ—Ä–µ–≤–æ–¥ (1 –≤—ã–∑–æ–≤ LLM; –∫—ç—à —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è)

3) –ü–∞–∫–µ—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –°–æ–∑–¥–∞—ë—Ç—Å—è `BatchJob` –∏ `BatchJobItem` –ø–æ –≥–ª–∞–≤–∞–º
- –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤ —Ñ–æ–Ω–µ (FastAPI BackgroundTasks), UI –æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å
- –°–æ–±–ª—é–¥–∞–µ—Ç—Å—è –ª–∏–º–∏—Ç 10 req/min (–≥–ª–æ–±–∞–ª—å–Ω—ã–π —Å—á—ë—Ç—á–∏–∫ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –±—ç–∫–µ–Ω–¥–∞)

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–∫–ª—é—á–µ–≤—ã–µ)

- DATABASE_URL ‚Äî —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è Postgres (Neon)
- REDIS_URL ‚Äî URL Redis (Upstash TCP, –∫–∞–∫ —Ä–µ–∑–µ—Ä–≤)
- UPSTASH_REDIS_REST_URL / UPSTASH_REDIS_REST_TOKEN ‚Äî REST Upstash (–æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∏–µ–Ω—Ç)
- GEMINI_API_KEYS_RAW ‚Äî —Å–ø–∏—Å–æ–∫ –∫–ª—é—á–µ–π Gemini (—Å—Ç—Ä–æ–∫–∞, –ø–∞—Ä—Å–∏—Ç—Å—è –≤ —Å–ø–∏—Å–æ–∫)
- ALLOWED_ORIGINS_RAW ‚Äî —Å–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤ –¥–ª—è CORS
- GEMINI_API_RESET_TIMEZONE ‚Äî America/Los_Angeles (Mountain View) –¥–ª—è –¥–Ω–µ–≤–Ω–æ–≥–æ —Å–±—Ä–æ—Å–∞

–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ —Å–º. `ENVIRONMENT_SETUP.md`.

## üöÄ –î–µ–ø–ª–æ–π (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã)

- Render.com: —Ä—É—á–Ω–æ–π Docker‚Äë–¥–µ–ø–ª–æ–π –±–µ–∑ Blueprint/Background Worker
- Backend Docker Command: –≤—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä, –Ω–∞–ø—Ä–∏–º–µ—Ä:

```sh
python run_migration.py && uvicorn app.main:app --host 0.0.0.0 --port $PORT
```

- Neon.tech: —Å–æ–∑–¥–∞—Ç—å –ë–î –∏ –ø–æ–ª—É—á–∏—Ç—å `DATABASE_URL`
- Upstash: —Å–æ–∑–¥–∞—Ç—å Redis, —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å REST URL/TOKEN –∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) TCP URL

–ü–æ—à–∞–≥–æ–≤–æ: `DEPLOYMENT.md`.

## üß™ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –ª–æ–∫–∞–ª—å–Ω–æ

### Docker Compose
```bash
git clone <repository-url>
cd lightnovelnlp
docker-compose up -d
docker-compose logs -f backend
```

### –ë–µ–∑ Docker
```bash
# Backend
cd backend
pip install -r requirements.txt
uvicorn app.main:app --reload

# Frontend (SPA)
cd frontend
npm install
npm run dev

# API Tools (–±–µ–∑ —Å–±–æ—Ä–∫–∏):
# –æ—Ç–∫—Ä—ã—Ç—å frontend/public/api-tools.html –≤ –±—Ä–∞—É–∑–µ—Ä–µ
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

- API Tools: `https://lightnovel-frontend.onrender.com/api-tools.html`
- Swagger UI: `https://lightnovel-backend.onrender.com/docs`
- Postman: `Light_Novel_NLP_API.postman_collection.json`
- –¢—Ä–∞–±–ª—à—É—Ç–∏–Ω–≥: `API_TROUBLESHOOTING.md`
- –ü—Ä–æ—Ü–µ—Å—Å –∞–≤—Ç–æ‚Äë—É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ç–µ—Ä–º–∏–Ω–æ–≤: `TERM_APPROVAL_PROCESS.md`
- –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ —É–ª—É—á—à–µ–Ω–∏—è: `IMPROVEMENTS_SUMMARY.md`

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- `GET /glossary/api-usage` ‚Äî –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–ª—é—á–∞–º Gemini (usage_today, –ø–æ—Ä–æ–≥, –∫—É–ª–¥–∞—É–Ω)
- `GET /glossary/cache-stats` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫—ç—à–∞ (REST/TCP)

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ö–æ–Ω—Ç–µ–∫—Å—Ç —Ç–µ—Ä–º–∏–Ω–æ–≤ (–ø–æ–ª–µ `context`) –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–µ—Ä–µ–≤–æ–¥ –Ω–∞–ø—Ä—è–º—É—é ‚Äî –≤ –ø—Ä–æ–º–ø—Ç –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø–∞—Ä—ã —Ç–µ—Ä–º–∏–Ω–æ–≤ –∏ —Å–∞–º–º–∞—Ä–∏ –≥–ª–∞–≤—ã/–ø—Ä–æ–µ–∫—Ç–∞
- –ú–æ–¥–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `gemini-2.5-flash`
- –ü–∞–∫–µ—Ç–Ω—ã–π —Ä–µ–∂–∏–º —á–µ—Ä–µ–∑ Gemini Batch API –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–∑‚Äë–∑–∞ UX –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–µ–π –º—ç–ø–ø–∏–Ω–≥–∞; —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–∞–∫–µ—Ç–Ω—ã–π —Ä–µ–∂–∏–º –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞ —Å —Å–æ–±–ª—é–¥–µ–Ω–∏–µ–º –ª–∏–º–∏—Ç–æ–≤

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License ‚Äî —Å–º. LICENSE
